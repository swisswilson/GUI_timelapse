from Tkinter import *
import math
import RPi.GPIO as gpio
gpio.setmode(gpio.BCM)
from time import sleep
gpio.setwarnings(False)


###setting up pins to control motors
shutterpin = 10
motorpin1 = 3
motorpin2 = 7
dir1 = 5
dir2 = 8

gpio.setup(shutterpin,gpio.OUT)
gpio.setup(motorpin1,gpio.OUT)
gpio.setup(motorpin2,gpio.OUT)
gpio.setup(dir1,gpio.OUT)
gpio.setup(dir2,gpio.OUT)
##############


#define functions for controlling motors here
def left():
        gpio.output(dir1,1)

def right():
        gpio.output(dir1,0)

def up():
        gpio.output(dir2,1)

def down():
        gpio.output(dir2,0)

def step(s1,s2):
        gpio.output(motorpin1,s1)
        gpio.output(motorpin2,s2)

def moveV():
        for i in range(0,4):
                step(1,0)
                sleep(0.5)
                step(0,0)
                sleep(0.5)

def moveH():
        for i in range(0,4):
                step(0,1)
                sleep(0.5)
                step(0,0)
                sleep(0.5)

###############

##now to make the actual GUI with all inputs
mainframe= Tk()
mainframe.wm_title("Timelapse control")
mainframe.config(background="#FFFFFF")
root= Frame(mainframe,bg="#037481")
root.grid()

var=IntVar()
var1=IntVar()

leftbutton=Radiobutton(root, text="move left", variable=var,value=1,command=left)
leftbutton.grid(row=0,column=1,padx=5,pady=5)
rightbutton=Radiobutton(root, text="move right", variable=var,value=2,command=right)
rightbutton.grid(row=1, column=1,padx=5,pady=5)
upbutton=Radiobutton(root, text="move up", variable=var1,value=3,command=up)
upbutton.grid(row=0, column=2,padx=5,pady=5)
downbutton=Radiobutton(root, text="move down", variable=var1,value=4,command=down)
downbutton.grid(row=1,column=2,padx=5,pady=5)

shots_scale=Scale(root,from_=0, to=1000,resolution=2, orient=HORIZONTAL,label="shots",tickinterval=50)
shots_scale.grid(row=2,column=1,padx=5)
shots=shots_scale.wget()

exp_scale=Scale(root,from_=0, to=30,orient=HORIZONTAL,label="exposure",tickinterval=5)
exp_scale.grid(row=3,column=1,padx=5
exposure=exp_scale.wget()

waittime_scale=Scale(root,from_=0,to=600,orient=HORIZONTAL,label="waittime",tickinterval=10)  #ten minutes max?
waittime_scale.grid(row=4,column=1,padx=5)
waittime=waittime_scale.wget()
#####

root.mainloop()  #this calls the actual GUI, everything must be above it
